## 1.5 Agentic Workflow：智能体工作流范式

Agentic Workflow（智能体工作流）是 2024 年以来最重要的 AI 应用范式之一。与传统的单次推理不同，它强调将 AI 能力组织成可控、可观测、可迭代的工作流程。

### 1.5.1 什么是 Agentic Workflow

#### 定义

Agentic Workflow 是一种让 AI 系统以**迭代、自主、目标导向**的方式完成复杂任务的工作模式。

**核心特征**：
- **迭代式执行**：不是一次生成最终答案，而是多步骤逐渐逼近目标
- **自主决策**：AI 自主决定下一步行动，而非完全由用户控制
- **工具集成**：无缝调用外部工具和服务
- **状态管理**：维护执行过程中的中间状态

### 1.5.2 与传统 Prompt 的区别

| 维度 | 传统 Prompt | Agentic Workflow |
|------|-------------|------------------|
| 交互模式 | 单次请求-响应 | 多轮迭代执行 |
| 控制权 | 用户完全控制 | AI 自主决策 |
| 执行时间 | 毫秒到秒级 | 秒到分钟级 |
| 能力边界 | 模型内在知识 | 工具扩展后的能力 |
| 结果质量 | 依赖 Prompt 质量 | 可通过迭代改进 |

### 1.5.3 典型的 Agentic Workflow 模式

#### 规划-执行模式

先制定完整计划，然后逐步执行：

```
用户目标
    ↓
[规划阶段] 生成任务步骤列表
    ↓
[执行阶段] 逐步执行每个步骤
    ↓
最终结果
```

**适用场景**：结构化任务、可预测的工作流程

#### ReAct 模式

推理和行动交替进行：

```
Thought: 我需要先了解用户的代码结构
Action: 读取项目目录
Observation: 发现是一个 Python 项目...
Thought: 现在我需要分析主入口文件
Action: 读取 main.py
...
```

**适用场景**：探索性任务、需要动态调整的场景

#### 反思-改进模式

执行后进行自我评估和改进：

```
初始方案 → 执行 → 评估结果 → 反思问题 → 改进方案 → 重新执行
```

**适用场景**：代码编写、内容创作等需要质量把控的任务

#### 多智能体协作模式

多个专业化 Agent 协同工作：

```
用户需求
    ↓
[协调者 Agent] 分配任务
    ↓
[研究 Agent] ←→ [写作 Agent] ←→ [审核 Agent]
    ↓
整合输出
```

**适用场景**：复杂项目、需要多种专业技能的任务

### 1.5.4 实际产品案例

### 1.5.5 Claude Artifacts

Anthropic 的 Claude 在 Artifacts 功能中展示了 Agentic Workflow：

- **即时预览**：生成代码后立即渲染展示
- **迭代改进**：用户可以要求修改，Agent 理解上下文逐步完善
- **工具集成**：支持 HTML/CSS/JS、React、Mermaid 图表等

### 1.5.6 Cursor / Windsurf

现代 AI IDE 的代码编辑工作流：

```
1. 用户描述需求
2. Agent 分析代码库
3. 生成修改计划
4. 逐文件编辑
5. 自动验证（运行测试、检查类型）
6. 必要时自动修复问题
```

### 1.5.7 Devin / OpenHands

自主软件开发 Agent：

- 完整的开发环境访问
- 自主执行 git 操作
- 运行测试并修复问题
- 与用户进行异步协作

### 1.5.8 实现 Agentic Workflow 的关键要素

#### 状态管理

```python
class AgentState:
    goal: str                    # 最终目标
    current_step: int            # 当前步骤
    plan: List[str]              # 执行计划
    memory: List[Message]        # 对话历史
    tool_results: Dict           # 工具调用结果
    errors: List[str]            # 错误记录
```

#### 控制流

- **循环机制**：直到达成目标或超时
- **分支判断**：根据中间结果调整路径
- **错误处理**：失败时的重试或回退策略
- **终止条件**：明确的完成标准

#### 人机交互点

- **审批节点**：关键操作前询问用户
- **信息补充**：缺少必要信息时请求输入
- **进度反馈**：实时展示执行状态

#### 最佳实践

### 1.5.9 DO ✅

- **设置明确的终止条件**：避免无限循环
- **实现渐进式披露**：先执行低风险操作
- **提供取消机制**：用户可随时中断
- **记录完整轨迹**：便于调试和审计

### 1.5.10 DON'T ❌

- **不要过度自主**：重大决策应询问用户
- **不要忽略错误**：每个失败都应该被处理
- **不要无限重试**：设置最大尝试次数
- **不要隐藏过程**：透明度建立信任

### 1.5.11 小结

Agentic Workflow 代表了 AI 应用从"工具"到"助手"再到"协作者"的演进。理解和掌握这一范式，是构建下一代 AI 应用的关键。

在接下来的章节中，我们将深入探讨支撑 Agentic Workflow 的各个核心组件：推理引擎、记忆系统和工具能力。

---

**下一节**: [本章小结](summary.md)