## 本章小结

本章跳出了 AI 算法的范畴，从软件工程和架构设计的角度，探讨了如何打造一个健壮、高效且经济的智能体系统。

### 核心要点回顾

1.  **架构设计模式**
    *   **ReAct**：适用于通用场景，灵活性强但长链路易出错。
    *   **Planner-Executor**：适用于步骤清晰的任务，通过预先规划提升执行效率。
    *   **Reflexion**：通过反复迭代与自我评估换取高质量输出。
    *   **Toolformer/Routing**：适用于重度依赖 API 的工具型应用。

2.  **鲁棒性设计（Robustness）**
    *   **防御性编程**：用确定性的代码（Max Iterations, Time Budget）去约束概率性的 LLM，防止死循环。
    *   **错误恢复**：利用 Pydantic 校验与自动修复 (Auto-fix) 机制处理格式错误的输出。
    *   **状态管理**：做好状态隔离、压缩与快照回滚，防止上下文 (Context) 污染。
    *   **沙箱机制**：通过 Docker/E2B 隔离代码执行环境，确保系统安全。

3.  **企业级集成**
    *   **成本控制**：利用语义缓存 (Caching) 与模型级联 (Cascading) 降低词元 (Token) 消耗。
    *   **延迟优化**：必须实现流式输出 (Streaming) 与并行执行 (Parallelism) 以提升用户体验。
    *   **可观测性**：引入 LangSmith/LangFuse 等 APM 工具，实现全链路追踪 (Tracing) 与成本监控。

### 下一步
即使系统再健壮，如果智能体本身“变坏”了怎么办？下一章，也是本书的最终章，我们将探讨智能体的**安全与对齐**，确保它们永远是人类的朋友。

---

**下一节**: [第十章：安全、伦理与 AGI 展望](../10_future/README.md)