## 本章小结

本章跳出了 AI 算法的范畴，从软件工程和架构设计的角度，探讨了如何打造一个健壮、高效且经济的智能体系统。

### 核心要点回顾

1. **架构设计模式**
    * **ReAct**：适用于通用场景，灵活性强但长链路易出错。
    * **编排者-执行者**：适用于步骤清晰的任务，通过预先规划提升执行效率。
    * **反思**：通过反复迭代与自我评估换取高质量输出。
    * **工具调用与路由**：适用于重度依赖工具与 API 的应用。

2. **鲁棒性设计**
    * **防御性编程**：用确定性的代码（最大迭代次数、时间预算）去约束概率性的 LLM，防止死循环。
    * **错误恢复**：利用结构化校验与自动修复机制处理格式错误的输出。
    * **状态管理**：做好状态隔离、压缩与快照回滚，防止上下文污染。
    * **沙箱机制**：通过容器或受控执行环境隔离代码执行，确保系统安全。

3. **企业级集成与性能**
    * **成本控制**：利用语义缓存与模型级联降低词元消耗。
    * **架构与延迟优化**：采用分离式架构（Disaggregated Serving）解决计算与访存冲突瓶颈，利用投机解码规避自回归时延。
    * **严格约束**：通过底层引擎掩码实现高可靠性的结构化输出（Constrained Decoding）。
    * **可观测性**：实现全链路追踪与成本监控，支持回放与定位根因。

4. **工程化落地**
    * **组织工程**：智能体设计本质是组织工程。明确目标（速度与质量），选择模式（静态优先），构建护栏。
    * **数据飞轮**：数据即代码。通过线上监控捕获坏例子，转化为测试用例，驱动系统持续进化。
    * **概率系统**：接受智能体的概率性本质。通过沙箱限制爆炸半径，通过红队测试提前发现风险。
    * **人机协同**：在关键步骤引入 HITL 机制，确保高风险操作可控。

### 下一步

下一章将进入一个全新的领域：**Agentic Coding**。这不仅仅是关于如何写代码，而是关于如何编排 AI 来构建软件。

---

**下一章**: [第十章：智能体编程实践](../10_agentic_coding/README.md)
