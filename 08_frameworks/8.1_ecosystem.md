## 8.1 框架生态概览与选型指南

2023 年我们可能还在手写 `while` 循环来构建简单的智能体，但到了 2024 年，智能体开发框架如雨后春笋般涌现。

为什么我们需要框架？因为手写 Prompt 和 API 调用虽然灵活，但在处理 **多智能体通信**、**状态管理**、**错误重试**、**上下文窗口优化** 以及 **流式输出** 时，原生代码会迅速变成难以维护的"意大利面条"。

目前市场上已经形成了一个丰富但略显拥挤的生态。如何根据业务需求选择合适的工具，是每个开发者面临的第一个挑战。

### 8.1.1 核心框架图谱

我们将目前的智能体框架分为四类：

#### 编排类

这类框架专注于"如何把 LLM、提示词 (Prompt) 和工具 (Tool) 串联起来"，侧重流程控制。

- **LangChain**:
  - **定位**：大模型应用的"标准库"。
  - **特点**：组件极其丰富 (模型输入输出 Model I/O, 检索 Retrieval, 链 Chains)，生态最强。
  - **缺点**：早期抽象过于复杂，有一定的学习门槛。
  
- **LangGraph**:
  - **定位**：深度控制的图编排框架。
  - **特点**：通过图（Graph）结构定义状态流转，支持循环和条件跳转。
  - **适用**：生产级、高稳定性要求的复杂智能体。

- **LlamaIndex**:
  - **定位**：数据驱动的 RAG 专家。
  - **特点**：在非结构化数据索引和检索方面无出其右，智能体能力主要围绕"查询引擎即工具"展开。

#### 多智能体类

这类框架专注于"如何让多个智能体像团队一样协作"。

- **AutoGen (Microsoft)**:
  - **定位**：多体对话与代码执行平台。
  - **特点**：极其强大的 **代码执行** 能力（Docker 沙箱），支持用户代理 (UserProxy) 和助手 (Assistant) 的全自动对话。
  - **适用**：代码生成、数据分析、科研模拟。

- **CrewAI**:
  - **定位**：基于角色的流程编排。
  - **特点**：设计理念源于人类组织架构（角色 Role, 目标 Goal, 背景故事 Backstory），易于上手，支持顺序和层级流程。
  - **适用**：内容创作、营销自动化、创意工作流。

- **MetaGPT**:
  - **定位**：软件工程多智能体框架。
  - **特点**：将 SOP（标准作业程序）硬编码进 Prompt，模拟产品经理、架构师、工程师的协作交付。

#### 企业级 SDK

这类框架侧重于与现有企业系统的集成。

- **Semantic Kernel (Microsoft)**:
  - **定位**：轻量级 Copilot 开发 SDK。
  - **特点**：支持 C#, Python, Java。架构设计优雅，易于集成到现有 ERP/CRM 系统中。
  - **核心**：内核 (Kernel)、插件 (Plugin)、规划器 (Planner)。

#### 实验性探索

- **AutoGPT**: 自治智能体的先驱，虽然稳定性一般，但启发了通过"目标分解"实现自主运行的思路。
- **BabyAGI**: 展示了最简化的任务管理闭环。

#### 开放标准工具

2025年底，Agentic AI Foundation (AAIF) 的成立推动了新一代开放标准框架的涌现：

- **goose (Block)**:
  - **定位**：开源、本地优先的 AI 智能体框架。
  - **特点**：基于 MCP 协议构建，支持任意 LLM 后端，强调用户隐私和本地执行。
  - **核心能力**：安装、执行、编辑和测试代码，超越简单的代码建议。
  - **项目地址**：https://block.github.io/goose

- **Claude Agent SDK (Anthropic)**:
  - **定位**：Claude 官方智能体开发套件。
  - **特点**：提供"给 Claude 一台计算机"的能力——运行 bash 命令、编辑文件、访问 Web。
  - **设计模式**：核心循环为"收集上下文 → 采取行动 → 验证工作 → 重复"。
  - **核心概念**：智能体技能（Agent Skills）（可动态加载的领域专业技能包）。

- **Google ADK (Agent Development Kit)**:
  - **定位**：Google Cloud 的智能体开发工具包。
  - **特点**：使用 Python 函数简化生产级智能体创建，抽象 Prompt 工程和 API 调用。
  - **配套服务**：Agentspace（Agent 发现和市场）、Gemini Agent Mode。

- **AGENTS.md (OpenAI)**:
  - **定位**：AI 编程智能体的项目指令标准。
  - **特点**：类似 README.md，但专门为 AI 智能体提供项目上下文。
  - **采用规模**：60,000+ 开源项目，支持 Codex、Cursor、GitHub Copilot、VS Code 等。
  - **详细介绍**：见[附录 E：AGENTS.md 规范指南](../12_appendix/12.5_agents_md.md)。

### 8.1.2 选型决策矩阵

在做技术选型时，可以参考以下维度：

| 维度 | LangChain / LangGraph | AutoGen | CrewAI | Semantic Kernel | LlamaIndex |
| :--- | :--- | :--- | :--- | :--- | :--- |
| **可控性** | ⭐⭐⭐⭐⭐ (极高) | ⭐⭐⭐ (中) | ⭐⭐⭐ (中) | ⭐⭐⭐⭐ (高) | ⭐⭐⭐ (中) |
| **易用性** | ⭐⭐ (较难) | ⭐⭐⭐ (中) | ⭐⭐⭐⭐⭐ (极简) | ⭐⭐⭐ (中) | ⭐⭐⭐⭐ (易) |
| **代码能力** | ⭐⭐⭐ (依赖工具) | ⭐⭐⭐⭐⭐ (原生) | ⭐⭐ (依赖工具) | ⭐⭐⭐ (依赖插件) | ⭐⭐ (弱) |
| **RAG 能力** | ⭐⭐⭐⭐ (强) | ⭐⭐ (一般) | ⭐⭐⭐ (一般) | ⭐⭐⭐ (一般) | ⭐⭐⭐⭐⭐ (极强) |
| **多体协作** | ⭐⭐⭐ (需手动构建) | ⭐⭐⭐⭐⭐ (原生) | ⭐⭐⭐⭐⭐ (原生) | ⭐⭐ (弱) | ⭐⭐ (弱) |
| **生态集成** | ⭐⭐⭐⭐⭐ (最广) | ⭐⭐⭐ (一般) | ⭐⭐⭐⭐ (基于 LC) | ⭐⭐⭐ (微软系) | ⭐⭐⭐⭐ (广泛) |

### 8.1.3 选型建议

1. **如果你在做企业级业务流（如审批、客服）**：
   首选 **LangGraph**。你需要精确控制每一步跳转，不能容忍智能体 "自由发挥"。

2. **如果你需要处理大量私有文档（如法律助手）**：
   首选 **LlamaIndex**。它的索引和检索策略能大幅提升回答准确度。

3. **如果你在做创意或自动化任务（如写公众号文章）**：
   首选 **CrewAI**。它能让你像导演一样安排 writer, editor 角色，快速出成果。

4. **如果你是极客，想做代码生成工具**：
   首选 **AutoGen**。它的代码执行闭环是目前最强的。

5. **如果你是传统 .NET/Java 开发团队**：
   首选 **Semantic Kernel**。它能让你用熟悉的面向对象方式管理 AI 能力。

### 8.1.4 小结

框架没有绝对的优劣，只有"适合"与"不适合"。

- **智能体本质是 While 循环**，框架只是帮我们封装了这个循环里的脏活累活。
- 不要被框架绑定。理解底层的 Prompt 设计、工具调用和记忆管理才是核心。
- 很多时候，**混合使用** 也是一种策略（例如用 LlamaIndex 做检索工具，然后挂载到 AutoGen 的智能体上）。

下一节我们将深入探讨目前最火热的框架组合：LangChain 与 LangGraph。

---

**下一节**: [LangChain 与 LangGraph：从链到图](8.2_langchain.md)
