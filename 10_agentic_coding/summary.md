## 本章小结

本章探讨了从 Vibe Coding 到 Agentic Coding 的范式转移，深入剖析了智能体编程的核心——**Agent Loop**，并给出了完整的工作流与最佳实践指南。

## 范式对比与认知转变

| 范式 | 核心理念 | 适用场景 | 局限性 |
|------|---------|---------|--------|
| **Vibe Coding** | 自然语言生成代码 | 原型验证、学习 | 技术债务、可维护性 |
| **Agentic Coding**| AI 作为自主开发伙伴 | 生产级开发 | 需要工程化实践 |

**关键认知转变**：

1. 从"我写代码"到"我指导 AI 写代码"
2. 从"掌握语法"到"掌握意图表达"
3. 从"手动调试"到"设计验证流程"
4. 从"个人技能"到"人机协作效率"

## 智能体循环核心概念

| 概念 | 核心要点 |
|------|---------|
| **智能体循环** | 思考→行动→观察的循环执行 |
| **停止序列** | 控制模型暂停、等待工具结果 |
| **不可见状态** | 上下文中大量用户看不到的信息 |
| **智能体驾驭系统** | 指令+工具+消息的组合 |
| **上下文管理**| 智能体工作记忆的优化 |

**关键认知**：
1. 智能体不是魔法，是可解释的状态机
2. 上下文窗口是稀缺资源，需要精心管理
3. 当智能体"笨"的时候，先检查不可见状态
4. 重置对话是最简单有效的调试手段

## 工作流要点

| 工作流阶段 | 关键实践 |
|-----------|---------|
| 任务分解 | 使用 DECOMPOSE 框架 |
| 规划 | 规划模式先行，回退优于修补 |
| 上下文 | 让智能体自己找，适时开新对话 |
| 并行 | 利用 Git 工作树并行开发 |
| 测试 | TDD 工作流驱动智能体 |
| 架构 | 先画图再写码 |
| 审查 | 执行清单 + 让智能体自审 |
| 调试 | 假设驱动的 Debug Mode |

## 最佳实践要点

| 最佳实践 | 关键要点 |
|---------|---------|
| **提示词** | CLEAR 框架，分步执行，同时请求测试 |
| **监督** | 分级监督，建立检查点 |
| **技能系统** | 封装领域知识，按需加载 |
| **钩子系统** | 生命周期自动化，长运行智能体 |
| **复利工程** | 每次错误都是进化机会 |
| **刻意练习** | 建立肌肉记忆，持续提升 |
| **安全边界** | 最小权限，禁止清单 |

## 关键概念清单

* **Vibe Coding**：自然语言驱动、沉浸式、忽略代码细节的编程风格。
* **Agentic Coding**：AI 作为自主智能体，具备理解、规划、执行、验证的完整闭环能力。
* **Agent Loop**：`思考 -> 工具调用 -> 环境反馈 -> 思考` 的状态机循环。
* **停止序列**：强制模型中断生成、交还控制权给宿主的关键机制。
* **智能体驾驭系统**：由指令、工具、用户消息构成的组合。
* **上下文工程**：通过规则、技能和文件引用来管理上下文，是 Agentic Coding 的核心技能。
* **规划模式**：规划先于执行，“回退优于修补”。
* **DECOMPOSE 框架**：任务分解的九步方法论。
* **CLEAR 框架**：提示词设计的五要素结构。
* **复利工程**：将隐性知识显性化，让每次错误成为系统进化的养料。

## 实践要点

* **工具选择**：优先按任务形态选工具，例如 IDE 内多文件编辑、终端批处理、平台工作流自动化、本地化部署等。
* **工作流升级**：从关注语法和 API，转向关注需求拆解、上下文准备和验收审查。
* **上下文管理**：不要一次性塞入所有文件，利用 `@` 精确引用或让智能体自主检索。
* **自动化**：利用 AI 代码审查工具和 CI/CD 集成，让 AI 参与代码审查。

## 常见误区

* **误区 1：期望 AI 一次性生成完美代码**。事实：Agentic Coding 是一个迭代过程，第一版往往需要修改。
* **误区 2：试图用对话修补烂代码**。事实：当上下文污染严重时，`git reset` 或开启新对话永远比修补更快。
* **误区 3：认为 Prompt 不重要**。事实：越强大的模型越依赖高质量的 Prompt（清晰的目标、充足的上下文、明确的约束）。

通过刻意练习，你将建立起与 AI 协作的"肌肉记忆"，真正成为 Agentic 时代的超级个体。

**下一章**: [第十一章：安全、伦理与未来](../11_future/README.md)
